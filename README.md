# InsidersBooks API

–ü–æ–≤–Ω–æ—Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–∏–π API –¥–ª—è —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫–Ω–∏–≥–∞–º–∏ –∑ —Å–∏—Å—Ç–µ–º–æ—é –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤, –∫–æ–º–µ–Ω—Ç–∞—Ä—è–º–∏ —Ç–∞ —Ä–µ–π—Ç–∏–Ω–≥–∞–º–∏.

## –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—á–Ω–∏–π —Å—Ç–µ–∫

- **FastAPI** - –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è API
- **SQLAlchemy** - ORM –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö  
- **PostgreSQL** - –±–∞–∑–∞ –¥–∞–Ω–∏—Ö
- **Pydantic** - –≤–∞–ª—ñ–¥–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö
- **Poetry** - —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—è–º–∏
- **JWT** - –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è —á–µ—Ä–µ–∑ —Ç–æ–∫–µ–Ω–∏
- **Bcrypt** - —Ö–µ—à—É–≤–∞–Ω–Ω—è –ø–∞—Ä–æ–ª—ñ–≤

## –©–æ —Ü–µ —Ç–∞–∫–µ

–¶–µ –ø–æ–≤–Ω–æ—Ü—ñ–Ω–Ω–∏–π FastAPI –¥–æ–¥–∞—Ç–æ–∫ –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ –∫–Ω–∏–≥–∞–º–∏. –í–∫–ª—é—á–∞—î:
- **–°–∏—Å—Ç–µ–º—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤** –∑ 3 —Ä–æ–ª—è–º–∏ (reader/writer/admin)
- **–£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫–Ω–∏–≥–∞–º–∏** (CRUD –æ–ø–µ—Ä–∞—Ü—ñ—ó)
- **–ö–æ–º–µ–Ω—Ç–∞—Ä—ñ –¥–æ –∫–Ω–∏–≥** –∑ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—é —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è
- **–†–µ–π—Ç–∏–Ω–≥–∏ –∫–Ω–∏–≥** (1-5 –∑—ñ—Ä–æ–∫)
- **–†–µ–∞–∫—Ü—ñ—ó –Ω–∞ –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ** (–ª–∞–π–∫–∏/–¥–∏–∑–ª–∞–π–∫–∏)

### –†–æ–ª—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤:
- **Reader** - –º–æ–∂–µ –¥–∏–≤–∏—Ç–∏—Å—è –∫–Ω–∏–≥–∏, –∑–∞–ª–∏—à–∞—Ç–∏ –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ —Ç–∞ —Ä–µ–π—Ç–∏–Ω–≥–∏
- **Writer** - –º–æ–∂–µ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ —Ç–∞ —Ä–µ–¥–∞–≥—É–≤–∞—Ç–∏ –∫–Ω–∏–≥–∏ + –≤—Å–µ —â–æ –º–æ–∂–µ Reader
- **Admin** - –ø–æ–≤–Ω–∏–π –¥–æ—Å—Ç—É–ø –¥–æ –≤—Å—ñ—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π –≤–∫–ª—é—á–Ω–æ –∑ –≤–∏–¥–∞–ª–µ–Ω–Ω—è–º

## –Ø–∫ –∑–∞–ø—É—Å—Ç–∏—Ç–∏

1. –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ:
```bash
poetry install
```

2. –ó–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–µ—Ä–≤–µ—Ä:
```bash
poetry run uvicorn src.insidersbooks.main:app --reload
```

3. –í—ñ–¥–∫—Ä–∏—Ç–∏ –≤ –±—Ä–∞—É–∑–µ—Ä—ñ: http://127.0.0.1:8000/docs

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

```
InsidersBooks/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îî‚îÄ‚îÄ insidersbooks/
‚îÇ       ‚îú‚îÄ‚îÄ main.py              # –ì–æ–ª–æ–≤–Ω–∏–π —Ñ–∞–π–ª FastAPI
‚îÇ       ‚îú‚îÄ‚îÄ database.py          # –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ë–î
‚îÇ       ‚îú‚îÄ‚îÄ models/              # –ú–æ–¥–µ–ª—ñ SQLAlchemy
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py      # –Ü–º–ø–æ—Ä—Ç–∏ –º–æ–¥–µ–ª–µ–π
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ user.py          # –ú–æ–¥–µ–ª—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ book.py          # –ú–æ–¥–µ–ª—å –∫–Ω–∏–≥–∏
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ comment.py       # –ú–æ–¥–µ–ª—å –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ–≤
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ rating.py        # –ú–æ–¥–µ–ª—å —Ä–µ–π—Ç–∏–Ω–≥—ñ–≤
‚îÇ       ‚îú‚îÄ‚îÄ schemas/             # Pydantic —Å—Ö–µ–º–∏
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ user.py          # –°—Ö–µ–º–∏ –¥–ª—è User
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ book.py          # –°—Ö–µ–º–∏ –¥–ª—è Book
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ comment.py       # –°—Ö–µ–º–∏ –¥–ª—è Comment
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ rating.py        # –°—Ö–µ–º–∏ –¥–ª—è Rating
‚îÇ       ‚îú‚îÄ‚îÄ routes/              # API –µ–Ω–¥–ø–æ—ñ–Ω—Ç–∏
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ auth.py          # –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è —Ç–∞ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—è
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ book.py          # –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫–Ω–∏–≥–∞–º–∏
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ comment.py       # –ö–æ–º–µ–Ω—Ç–∞—Ä—ñ –¥–æ –∫–Ω–∏–≥
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ rating.py        # –†–µ–π—Ç–∏–Ω–≥–∏ –∫–Ω–∏–≥
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ comment_rating.py # –†–µ–∞–∫—Ü—ñ—ó –Ω–∞ –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ
‚îÇ       ‚îî‚îÄ‚îÄ dependencies/        # –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
‚îÇ           ‚îî‚îÄ‚îÄ auth.py          # JWT –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è —Ç–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ä–æ–ª–µ–π
‚îú‚îÄ‚îÄ pyproject.toml              # Poetry –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
‚îî‚îÄ‚îÄ README.md                   # –¶–µ–π —Ñ–∞–π–ª
```

## API –ï–Ω–¥–ø–æ—ñ–Ω—Ç–∏

### üîê –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è (`/auth`)
- `POST /auth/register` - –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –Ω–æ–≤–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- `POST /auth/login` - –í—Ö—ñ–¥ –≤ —Å–∏—Å—Ç–µ–º—É (–æ—Ç—Ä–∏–º–∞–Ω–Ω—è JWT —Ç–æ–∫–µ–Ω–∞)

### üìö –ö–Ω–∏–≥–∏ (`/books`)
- `GET /books/` - –°–ø–∏—Å–æ–∫ –≤—Å—ñ—Ö –∫–Ω–∏–≥ (–≤—Å—ñ)
- `GET /books/{book_id}` - –î–µ—Ç–∞–ª—ñ –∫–Ω–∏–≥–∏ (–≤—Å—ñ)
- `POST /books/` - –°—Ç–≤–æ—Ä–∏—Ç–∏ –∫–Ω–∏–≥—É (**writer+**)
- `PUT /books/{book_id}` - –†–µ–¥–∞–≥—É–≤–∞—Ç–∏ –∫–Ω–∏–≥—É (**admin** –∞–±–æ –∞–≤—Ç–æ—Ä)
- `DELETE /books/{book_id}` - –í–∏–¥–∞–ª–∏—Ç–∏ –∫–Ω–∏–≥—É (**admin**)

### üí¨ –ö–æ–º–µ–Ω—Ç–∞—Ä—ñ (`/comments`)
- `POST /comments/book/{book_id}` - –î–æ–¥–∞—Ç–∏ –∫–æ–º–µ–Ω—Ç–∞—Ä (–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ñ)
- `GET /comments/book/{book_id}` - –ö–æ–º–µ–Ω—Ç–∞—Ä—ñ –¥–æ –∫–Ω–∏–≥–∏ (–≤—Å—ñ)
- `PUT /comments/{comment_id}` - –†–µ–¥–∞–≥—É–≤–∞—Ç–∏ –∫–æ–º–µ–Ω—Ç–∞—Ä (–∞–≤—Ç–æ—Ä –∞–±–æ **admin**)
- `DELETE /comments/{comment_id}` - –í–∏–¥–∞–ª–∏—Ç–∏ –∫–æ–º–µ–Ω—Ç–∞—Ä (–∞–≤—Ç–æ—Ä –∞–±–æ **admin**)

### ‚≠ê –†–µ–π—Ç–∏–Ω–≥–∏ (`/ratings`)
- `POST /ratings/book/{book_id}` - –ü–æ—Å—Ç–∞–≤–∏—Ç–∏ —Ä–µ–π—Ç–∏–Ω–≥ (–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ñ)
- `GET /ratings/book/{book_id}` - –†–µ–π—Ç–∏–Ω–≥–∏ –∫–Ω–∏–≥–∏ (–≤—Å—ñ)
- `PUT /ratings/{rating_id}` - –ó–º—ñ–Ω–∏—Ç–∏ —Å–≤—ñ–π —Ä–µ–π—Ç–∏–Ω–≥ (–∞–≤—Ç–æ—Ä)

### üëç –†–µ–∞–∫—Ü—ñ—ó –Ω–∞ –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ (`/comment-reactions`)
- `POST /comment-reactions/{comment_id}` - –õ–∞–π–∫/–¥–∏–∑–ª–∞–π–∫ –∫–æ–º–µ–Ω—Ç–∞—Ä—è (–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ñ)
- `DELETE /comment-reactions/{reaction_id}` - –í–∏–¥–∞–ª–∏—Ç–∏ —Å–≤–æ—é —Ä–µ–∞–∫—Ü—ñ—é (–∞–≤—Ç–æ—Ä)

**–ü—Ä–∏–º—ñ—Ç–∫–∞:** –¢–∞–±–ª–∏—Ü—ñ —Å—Ç–≤–æ—Ä—é—é—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—Ä–∏ –∑–∞–ø—É—Å–∫—É —Å–µ—Ä–≤–µ—Ä–∞.

## –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è

–î–ª—è –∑–∞—Ö–∏—â–µ–Ω–∏—Ö –µ–Ω–¥–ø–æ—ñ–Ω—Ç—ñ–≤ –ø–æ—Ç—Ä—ñ–±–Ω–æ –¥–æ–¥–∞—Ç–∏ –∑–∞–≥–æ–ª–æ–≤–æ–∫:
```
Authorization: Bearer YOUR_JWT_TOKEN
```

–¢–æ–∫–µ–Ω –æ—Ç—Ä–∏–º—É—î—Ç—å—Å—è –ø—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ–≥–æ –ª–æ–≥—ñ–Ω—É —á–µ—Ä–µ–∑ `/auth/login`.